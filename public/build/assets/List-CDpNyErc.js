import{f as q,r as d,g as E,c as m,o as f,a as e,t as l,F as S,h as L,D,n as j,C as y,b as u,i as A,H as w,E as Z,I as ee,q as P,d as M,v as U,e as z,w as te,J as se}from"./app-DpBHsqIn.js";import{d as oe,F as le}from"./index-BXhxl2qS.js";import{C as ae}from"./CourseCard-CGRPqci5.js";const ie={class:"list-unstyled main-item"},ne={class:"fw-bold bg-primary text-white mb-3 px-3 py-2 rounded",id:"category",style:{position:"sticky",top:"0px"}},re={key:0,class:"form-check mb-2"},ce=["onChange","id","value"],de=["for"],Q={__name:"CategoryFilter",emits:["categoryFilter"],setup(I,{emit:g}){const _=q(),t=d([]),n=d(0),o=d([]);d("");const p=g;function v(a,h){a.target.checked?o.value.push(h):o.value=o.value.filter(r=>r!==h),p("categoryFilter",o.value),_.push("/courses")}function k(a){axios.get("/categories",{headers:{"Content-Type":"application/json",Accept:"application/json"},params:{search:a}}).then(h=>{t.value=h.data.data.categories,n.value=h.data.data.total_items}).catch(h=>{console.error("Error fetching categories:",h)})}return E(()=>{k()}),(a,h)=>(f(),m("ul",ie,[e("div",ne,l(a.$t("Categories"))+" ("+l(n.value)+") ",1),(f(!0),m(S,null,L(t.value,r=>(f(),m("li",{key:r.id,class:"filter-item px-3"},[r.show!==!1?(f(),m("div",re,[e("input",{onChange:x=>v(x,r.id),id:"catFilter"+r.id,class:"form-check-input",type:"checkbox",value:r.id,name:"catFilter"},null,40,ce),e("label",{for:"catFilter"+r.id,class:"form-check-label"},l(r.title),9,de)])):D("",!0)]))),128))]))}},ue={class:"d-block fw-bold bg-primary text-white mb-1 px-3 py-2 rounded"},pe={id:"full-stars-example-two"},he={class:"rating pb-4"},me=["onClick"],J={__name:"RatingFilter",emits:["RatingFilter"],setup(I,{emit:g}){const _=q(),t=d([]),n=d(0),o=g,p=d(0);function v(a){_.push("/courses"),p.value=a,o("RatingFilter",p.value)}function k(){A.get("/instructor/list",{headers:{"Content-Type":"application/json",Accept:"application/json"}}).then(a=>{t.value=a.data.data.instructors,n.value=a.data.data.total_items}).catch(a=>{console.error("Error fetching instructors:",a)})}return E(()=>{k()}),(a,h)=>(f(),m(S,null,[e("strong",ue,l(a.$t("Select Ratings")),1),e("div",pe,[e("div",he,[(f(),m(S,null,L(5,r=>e("label",{key:r,class:"rating__label",onClick:x=>v(r)},[e("span",{class:j(["rating__icon fa fa-star",{active:r<=p.value}])},[y(u(le),{icon:u(oe)},null,8,["icon"])],2)],8,me)),64))])])],64))}},fe={class:"list-unstyled main-item"},_e={class:"fw-bold bg-primary text-white mb-3 px-3 py-2 rounded",id:"instructor",style:{background:"white",position:"sticky",top:"0px"}},be={class:"form-check mb-2"},ge=["onChange","id","value"],ve=["for"],O={__name:"InstructorFilter",emits:["instructorFilter"],setup(I,{emit:g}){const _=q(),t=d([]),n=d(0),o=d([]),p=g;function v(a,h){a.target.checked?o.value.push(h):o.value=o.value.filter(r=>r!==h),p("instructorFilter",o.value),_.push("/courses")}function k(){A.get("/instructor/list",{headers:{"Content-Type":"application/json",Accept:"application/json"}}).then(a=>{t.value=a.data.data.instructors,n.value=a.data.data.total_items}).catch(a=>{console.error("Error fetching instructors:",a)})}return E(()=>{k()}),(a,h)=>(f(),m("ul",fe,[e("div",_e,l(a.$t("Instructors"))+" ("+l(n.value)+") ",1),(f(!0),m(S,null,L(t.value,r=>(f(),m("li",{key:r.id,class:"filter-item px-3"},[e("div",be,[e("input",{onChange:x=>v(x,r.id),class:"form-check-input",type:"checkbox",name:"instructor",id:"instFilter"+r.id,value:r.id},null,40,ge),e("label",{class:"form-check-label",for:"instFilter"+r.id},l(r.name),9,ve)])]))),128))]))}},ye={class:"list-unstyled main-item"},$e={class:"fw-bold bg-primary text-white mb-3 px-3 py-2 rounded",style:{background:"white",position:"sticky",top:"0px"}},ke={class:"filter-item px-3"},xe={class:"form-check mb-2"},we=["checked","name"],Ce={class:"form-check-label",for:"flexRadioDefault1"},Fe={class:"filter-item px-3"},Re={class:"form-check mb-2"},De={class:"form-check-label",for:"flexRadioDefault2"},Se={class:"filter-item px-3"},Ie={class:"form-check mb-2"},je={class:"form-check-label",for:"flexRadioDefault3"},Ae={class:"filter-item px-3"},qe={class:"form-check mb-2"},Ee={class:"form-check-label",for:"flexRadioDefault4"},Le={class:"filter-item px-3"},Te={class:"form-check mb-2"},Ve={class:"form-check-label",for:"flexRadioDefault5"},Ne={class:"filter-item px-3"},Be={class:"form-check mb-2"},He={class:"form-check-label",for:"flexRadioDefault7"},G={__name:"SortOptions",emits:["sort"],setup(I,{emit:g}){const _=g;let t=d(!1);return(n,o)=>(f(),m("ul",ye,[e("div",$e,l(n.$t("Sort By")),1),e("li",ke,[e("div",xe,[e("input",{onChange:o[0]||(o[0]=p=>(_("sort",null,null),w(t)?t.value=!1:t=!1)),class:"form-check-input",type:"radio",id:"flexRadioDefault1",checked:!u(t),name:u(t)?"flexRadioDefault":""},null,40,we),e("label",Ce,l(n.$t("Relevance"))+" ("+l(n.$t("Default"))+") ",1)])]),e("li",Fe,[e("div",Re,[e("input",{onChange:o[1]||(o[1]=p=>(_("sort","price","desc"),w(t)?t.value=!0:t=!0)),class:"form-check-input",type:"radio",name:"flexRadioDefault",id:"flexRadioDefault2"},null,32),e("label",De,l(n.$t("Course Fee"))+": "+l(n.$t("High to Low")),1)])]),e("li",Se,[e("div",Ie,[e("input",{onChange:o[2]||(o[2]=p=>(_("sort","price","asc"),w(t)?t.value=!0:t=!0)),class:"form-check-input",type:"radio",name:"flexRadioDefault",id:"flexRadioDefault3"},null,32),e("label",je,l(n.$t("Course Fee"))+": "+l(n.$t("Low to High")),1)])]),e("li",Ae,[e("div",qe,[e("input",{onChange:o[3]||(o[3]=p=>(_("sort","view_count","desc"),w(t)?t.value=!0:t=!0)),class:"form-check-input",type:"radio",name:"flexRadioDefault",id:"flexRadioDefault4"},null,32),e("label",Ee,l(n.$t("Popular Courses")),1)])]),e("li",Le,[e("div",Te,[e("input",{onChange:o[4]||(o[4]=p=>(_("sort","published_at","desc"),w(t)?t.value=!0:t=!0)),class:"form-check-input",type:"radio",name:"flexRadioDefault",id:"flexRadioDefault5"},null,32),e("label",Ve,l(n.$t("Newest Courses")),1)])]),e("li",Ne,[e("div",Be,[e("input",{onChange:o[5]||(o[5]=p=>(_("sort","average_rating","desc"),w(t)?t.value=!0:t=!0)),class:"form-check-input",type:"radio",name:"flexRadioDefault",id:"flexRadioDefault7"},null,32),e("label",He,l(n.$t("Rating")),1)])])]))}},Pe={class:"py-4",style:{background:"#F1F5F9"}},Me={class:"container"},Ue={class:"row"},ze={class:"col-12 d-block d-lg-none mb-4 mb-lg-0 d-flex justify-content-end align-items-center gap-2"},Qe={class:"text-muted fs-6"},Je={class:"col-12 col-lg-3 d-none d-lg-block mb-4 mb-lg-0"},Oe={class:"bg-white rounded-2 overflow-hidden p-2",style:{position:"sticky",top:"100px"}},Ge={class:"d-flex justify-content-between align-items-center border-bottom border-light px-3 py-4"},Ke={class:"fw-bold fs-3 mb-0"},We={class:"input-group my-2 px-2",role:"search"},Xe=["placeholder"],Ye={style:{"overflow-y":"auto","max-height":"calc(100vh - 245px)"}},Ze={class:"px-3 py-1 border-bottom"},et={class:"px-3 py-1 border-bottom"},tt={class:"px-3 py-1 border-bottom"},st={class:"px-3 py-1"},ot={class:"bg-white rounded-3"},lt={class:"d-flex justify-content-between align-items-center border-bottom border-light px-3 py-4"},at={class:"px-3 py-1 border-bottom"},it={class:"px-3 py-1 border-bottom"},nt={class:"px-3 py-1 border-bottom"},rt={class:"px-3 py-1"},ct={class:"col-12 col-lg-9"},dt={key:0,class:"fw-bold text-center mb-5"},ut={class:"text-muted"},pt={key:1,class:"fw-bold text-center mb-5"},ht={class:"text-muted"},mt={class:"row align-items-center p-3 rounded-2 bg-white mb-4"},ft={class:"col-12 col-lg-6 text-center mb-3 mb-lg-0 text-lg-start"},_t={class:"col-12 col-lg-6"},bt=["placeholder"],gt={class:"row row-cols-1 row-cols-md-2 row-cols-lg-2 row-cols-xl-3"},vt={key:2,class:"text-center my-5"},yt={key:3,class:"text-center my-4"},wt={__name:"List",setup(I){const g=Z(),_=q(),t=ee();let n=d(!1);const o=d(t.query.search),p=d(t.query.category_id),v=d("");let k=d(""),a=d([]),h=d(1),r=d(15),x=d(0),F=d("");const K=i=>{$(i)};let b={items_per_page:10,page_number:1,sort:"view_count",sortDirection:"desc"};function V(i){i.length===0?(b={items_per_page:12,page_number:1,sort:"view_count",sortDirection:"desc"},_.push("/courses"),$()):(b.category_id=i,$())}function N(i){b.average_rating=i,$()}function B(i){i.length===0?(b={items_per_page:12,page_number:1,sort:"view_count",sortDirection:"desc"},_.push("/courses"),$()):(b.instructor_id=i,$())}function H(i,s){b.sort=i,b.sortDirection=s,$()}function T(){o.value=null,b={items_per_page:12,page_number:1,sort:"view_count",sortDirection:"desc"},$(),document.querySelectorAll('input[type="radio"]').forEach(c=>{c.checked=!1}),document.querySelectorAll('input[type="checkbox"]').forEach(c=>{c.checked=!1}),location.reload()}E(()=>{$()}),P(()=>t.query,()=>{o.value=t.query.search,p.value=t.query.category_id,v.value=t.query.search,$()});function $(i=1){o.value&&(b.search=o.value),p.value&&(b.category_id=p.value),b.items_per_page=r.value,b.page_number=i,g!=null&&g.authToken?A.get("/course/list",{headers:{"Content-Type":"application/json",Accept:"application/json",Authorization:`Bearer ${g.authToken}`},params:b}).then(s=>{var c;a.value=s.data.data.courses,x.value=s.data.data.total_courses,k.value=((c=s.data.data.courses[0])==null?void 0:c.category)||""}).catch(s=>{console.error("Error fetching courses:",s)}):A.get("/course/list",{headers:{"Content-Type":"application/json",Accept:"application/json"},params:b}).then(s=>{var c;a.value=s.data.data.courses,x.value=s.data.data.total_courses,k.value=((c=s.data.data.courses[0])==null?void 0:c.category)||""}).catch(s=>{console.error("Error fetching courses:",s)})}const W=()=>{v.value&&_.push(`/courses?search=${v.value}`)};P(()=>F.value,()=>{X()});function X(){const i=F.value.toLowerCase().trim(),s=document.querySelectorAll(".filter-item"),c=document.querySelectorAll(".main-item");s.forEach(C=>{const R=C.textContent.toLowerCase().includes(i);C.classList.toggle("d-block",R),C.classList.toggle("d-none",!R)}),c.forEach(C=>{const R=[...C.children].some(Y=>Y.classList.contains("d-block"));C.classList.toggle("d-block",R),C.classList.toggle("d-none",!R)})}return(i,s)=>(f(),m("section",Pe,[e("section",Me,[e("div",Ue,[e("div",ze,[e("span",Qe,l(i.$t("Filtering"))+": ",1),e("button",{type:"button",class:j(["btn btn-sm px-3 py-2 fs-5 fw-bold",u(n)?"btn-outline-primary":"border-2 border-primary"]),onClick:s[0]||(s[0]=c=>w(n)?n.value=!u(n):n=!u(n))},[e("i",{class:j(u(n)?"bi bi-funnel-fill":"text-primary bi bi-funnel")},null,2)],2)]),e("div",Je,[e("div",Oe,[e("div",Ge,[e("h5",Ke,l(i.$t("Filters")),1),e("span",{onClick:T,class:"text-decoration-none cursor-pointer text-danger"},l(i.$t("Reset")),1)]),e("div",We,[s[5]||(s[5]=e("span",{class:"input-group-text bg-light border-0 border-start border-top border-bottom px-3 py-2",id:"basic-addon1"},[e("i",{class:"ri ri-search-line"})],-1)),M(e("input",{"onUpdate:modelValue":s[1]||(s[1]=c=>w(F)?F.value=c:F=c),class:"form-control search-input border-0 border-top border-bottom border-end bg-light ps-0 py-2",type:"search",placeholder:i.$t("Search Filters data here")},null,8,Xe),[[U,u(F)]])]),e("div",Ye,[e("div",Ze,[y(Q,{onCategoryFilter:V})]),e("div",et,[y(G,{onSort:H})]),e("div",tt,[y(O,{onInstructorFilter:B})]),e("div",st,[y(J,{onRatingFilter:N})])])])]),e("div",{class:j(["col-12 col-lg-3 mb-4 mb-lg-0",u(n)?"d-block":"d-none"])},[e("div",ot,[e("div",lt,[e("h5",null,l(i.$t("Filters")),1),e("span",{onClick:T,class:"text-decoration-none cursor-pointer text-danger"},l(i.$t("Reset")),1)]),e("div",at,[y(Q,{onCategoryFilter:V})]),e("div",it,[y(G,{onSort:H})]),e("div",nt,[y(O,{onInstructorFilter:B})]),e("div",rt,[y(J,{onRatingFilter:N})])])],2),e("div",ct,[o.value?(f(),m("h1",dt,[e("span",ut,l(i.$t("Search"))+" -",1),z(" "+l(o.value),1)])):D("",!0),p.value?(f(),m("h1",pt,[e("span",ht,l(i.$t("Category"))+" -",1),z(" "+l(u(k)),1)])):D("",!0),e("section",mt,[e("div",ft,[e("span",null,l(i.$t("Showing"))+" "+l(u(a).length)+" of "+l(u(x))+" "+l(i.$t("courses")),1)]),e("div",_t,[e("form",{onSubmit:te(W,["prevent"]),class:"input-group border rounded-pill",role:"search"},[M(e("input",{"onUpdate:modelValue":s[2]||(s[2]=c=>v.value=c),class:"form-control border-0 rounded-pill search-input",type:"search",placeholder:i.$t("Search Course"),onInput:s[3]||(s[3]=c=>v.value===""?T():null)},null,40,bt),[[U,v.value]]),s[6]||(s[6]=e("button",{type:"submit",class:"btn btn-primary d-flex rounded-pill px-4"},[e("img",{src:"/assets/images/website/search.svg",alt:"Search"})],-1))],32)])]),e("div",gt,[(f(!0),m(S,null,L(u(a),c=>(f(),m("div",{key:c.id,class:"mb-4"},[y(ae,{course:c},null,8,["course"])]))),128))]),u(a).length==0?(f(),m("div",vt,[s[7]||(s[7]=e("h1",null,[e("i",{class:"ri-emotion-unhappy-line text-muted d-block display-1 mb-3"})],-1)),e("h3",null,l(i.$t("No courses found"))+".",1)])):D("",!0),u(a).length>0?(f(),m("div",yt,[y(u(se),{modelValue:u(h),"onUpdate:modelValue":s[4]||(s[4]=c=>w(h)?h.value=c:h=c),"total-items":u(x),"items-per-page":u(r),"max-pages-shown":5,onClick:K},null,8,["modelValue","total-items","items-per-page"])])):D("",!0)])])])]))}};export{wt as default};
