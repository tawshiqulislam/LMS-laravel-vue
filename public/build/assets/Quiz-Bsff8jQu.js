import{_ as M,E as R,r as f,q as j,g as A,f as V,I as F,i as E,s as I,S as L,c,a as t,C as D,t as o,l as N,j as U,b as r,e as h,F as Y,h as H,o as d,d as q,O as $,H as g,Z as O}from"./app-DpBHsqIn.js";import{u as P}from"./quiz-C4bTsM8A.js";import{k as Z,F as G}from"./index-BXhxl2qS.js";const J={key:0,class:"d-flex align-items-center justify-content-center",style:{height:"calc(100vh - 170px)"}},K={class:"text-danger"},W={key:1,class:"quiz-container shadow my-5"},X={class:"mb-4"},ee={key:0,class:"question-section"},te={class:"d-flex justify-content-between align-items-center"},se={class:"timer"},ae={class:"fs-6 fw-bold text-primary"},oe={class:"timer text-end fw-bold"},ie={class:"questionText"},ne={class:"options"},re=["value","name"],le=["value","name"],ue=["value","name"],ce={class:"navigation d-flex justify-content-between align-items-center mt-5"},de={key:1,class:"result-section"},me={class:"container"},he={class:"row"},_e={class:"col-12 col-md-4 offset-md-4 mt-5"},pe={class:"card border-primary"},ve={class:"card-header bg-primary text-white"},fe={class:"card-title"},be={class:"card-body"},ye={class:"card-text fw-bold"},qe={class:"fs-5"},ge={href:"/dashboard",class:"btn btn-primary mt-4 w-100"},ke={__name:"Quiz",setup(we){const k=R(),e=P(),w=F(),z=V(),b=f("");let n=f([]);const v=f(!1),y=f(!1),T=()=>{const i=e.quizData.id,a=e.quizData.question_type,u={question_id:i,...a=="multiple_choice"?{choices:v.value?[]:n.value}:{choice:v.value?null:n.value},skip:v.value};e.answers=u,n.value=a=="multiple_choice"?[]:[null]};j(e,()=>{e.currentTimer==0&&!y.value&&(x(),y.value=!0)},{deep:!0}),A(async()=>{var a,u,_;const i=z.beforeEach((l,s,p)=>{w.name==s.name?B(l,s,p):p()});z.afterEach(()=>{i()});try{const l=await E.get(`/quiz/start/${w.params.id}`,{headers:{"Content-Type":"application/json",Accept:"application/json",Authorization:`Bearer ${k.authToken}`}}),s=(a=l.data.data)==null?void 0:a.quiz_session;e.totalQuestion=(u=l.data.data)==null?void 0:u.question_count,e.authToken=k.authToken,e.quizData=(_=l.data.data)==null?void 0:_.question,e.quizSession=s,e.timerManager=(s==null?void 0:s.quiz_duration)||0,e.isResetTimer&&(e.isQuizSubmitted=!1,e.resetTimer()),e.timerManager=(s==null?void 0:s.quiz_duration)||0}catch(l){b.value=l.response.data.message}e.startTimer()});const x=()=>{v.value=!0,T(),Q()},Q=()=>{T(),e.resetTimer(),e.nextQuestion()};I(()=>{y.value=!1,e.currentTimer=0,e.timerManager=0,e.currentQuestion=1,e.quizData={},e.isQuizSubmitted=!1,e.stopTimer(),e.score=0,n.value=[]});const B=(i,a,u)=>{L.fire({title:"Are you sure?",text:"Your progress may be lost if you leave the exam.",icon:"warning",showCancelButton:!0,confirmButtonText:"Leave Quiz",cancelButtonText:"Stay on Page"}).then(_=>{_.isConfirmed?u():u(!1)})};return(i,a)=>{var _,l;const u=U("router-link");return b.value?(d(),c("div",J,[t("div",null,[t("h3",K,o(b.value),1),D(u,{to:"/",class:"btn btn-primary mt-4 w-100"},{default:N(()=>[h(o(i.$t("Move to Dashboard"))+" ",1),a[3]||(a[3]=t("i",{class:"bi bi-arrow-right"},null,-1))]),_:1})])])):(d(),c("div",W,[t("h1",X,o(i.$t("Start Your Quiz")),1),r(e).isQuizSubmitted?(d(),c("div",de,[t("h2",null,o(i.$t("Congretulations"))+", "+o(i.$t("Quiz Completed"))+"!",1),t("div",me,[t("div",he,[t("div",_e,[t("div",pe,[t("div",ve,[t("h5",fe,o(i.$t("Scoreboard")),1)]),t("div",be,[t("p",ye,[h(o(i.$t("You scored"))+": ",1),t("strong",qe,o(r(e).score),1)])])])])]),t("a",ge,[h(o(i.$t("Move to Dashboard"))+" ",1),a[6]||(a[6]=t("i",{class:"bi bi-arrow-right"},null,-1))])])])):(d(),c("div",ee,[t("div",te,[t("p",se,[h(o(i.$t("Time Remaining"))+" : ",1),t("span",ae,o(r(e).formattedTime),1)]),t("div",null,[t("p",oe,o(i.$t("Total Question"))+" : "+o(r(e).currentQuestion)+"/"+o(r(e).totalQuestion),1)])]),t("h2",null,o(i.$t("Question"))+" "+o(r(e).currentQuestion),1),t("div",null,[t("p",ie,[a[4]||(a[4]=t("i",{class:"bi bi-chevron-double-right"},null,-1)),h(" "+o((_=r(e).quizData)==null?void 0:_.question_text),1)]),t("div",ne,[(d(!0),c(Y,null,H((l=r(e).quizData)==null?void 0:l.options,(s,p)=>{var S,C;return d(),c("label",{key:p,class:"option"},[((S=r(e).quizData)==null?void 0:S.question_type)==="multiple_choice"?q((d(),c("input",{key:0,value:s==null?void 0:s.text,"onUpdate:modelValue":a[0]||(a[0]=m=>g(n)?n.value=m:n=m),type:"checkbox",name:"question_"+p},null,8,re)),[[$,r(n)]]):((C=r(e).quizData)==null?void 0:C.question_type)==="single_choice"?q((d(),c("input",{key:1,value:s==null?void 0:s.text,"onUpdate:modelValue":a[1]||(a[1]=m=>g(n)?n.value=m:n=m),type:"checkbox",name:"question_"+p},null,8,le)),[[$,r(n)]]):q((d(),c("input",{key:2,type:"radio",value:s==null?void 0:s.text,"onUpdate:modelValue":a[2]||(a[2]=m=>g(n)?n.value=m:n=m),name:"question_"+p},null,8,ue)),[[O,r(n)]]),h(" "+o(s==null?void 0:s.text),1)])}),128))])]),t("div",ce,[t("button",{class:"btn btn-danger btn-sm px-5 py-2",onClick:x},[h(o(i.$t("Skip"))+" ",1),D(r(G),{icon:r(Z)},null,8,["icon"])]),t("button",{class:"btn btn-primary btn-sm px-5 py-2",onClick:Q},[h(o(i.$t("Next"))+" ",1),a[5]||(a[5]=t("i",{class:"bi bi-arrow-right"},null,-1))])])]))]))}}},Qe=M(ke,[["__scopeId","data-v-e4ed6484"]]);export{Qe as default};
